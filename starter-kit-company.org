#+TITLE: Starter Kit Company
#+OPTIONS: toc:nil num:nil ^:nil

* Starter Kit Company
** Basic setup

Activate company for coding:
#+begin_src emacs-lisp
(add-hook 'prog-mode-hook 'company-mode)
(add-hook 'cmake-mode-hook 'company-mode)
(setq company-idle-delay 0.2
      company-require-match nil
      company-auto-complete nil
      company-show-numbers t
      company-dabbrev-downcase nil
      company-clang-insert-arguments nil
      company-begin-commands '(self-insert-command))
#+end_src

** Key bindings

#+begin_src emacs-lisp
(with-eval-after-load 'company
  (define-key company-active-map (kbd "C-n") 'company-select-next)
  (define-key company-active-map (kbd "C-p") 'company-select-previous))
#+end_src

** Company backends

Set the default backends for all modes.
#+BEGIN_SRC emacs-lisp
(setq company-backends
      '(company-capf
        company-dabbrev))
#+END_SRC

** Python mode

Use anaconda as backend.
#+begin_src emacs-lisp
(defun python-company-setup ()
  (when jedi-is-installed
    (anaconda-mode)
    (add-to-list 'company-backends 'company-anaconda)))

(add-hook 'python-mode-hook 'python-company-setup)

(with-eval-after-load 'python
  (if (eq 0
          (call-process-shell-command
           "python -c \"import jedi\""))
      (setq jedi-is-installed t)
    (setq jedi-is-installed nil)))
#+end_src

** C

#+begin_src emacs-lisp
(defun c-company-setup ()
  (when clang-installed
    (add-to-list 'company-backends 'company-clang)))

(add-hook 'c-mode-hook 'c-company-setup)
(add-hook 'c++-mode-hook 'c-company-setup)

(with-eval-after-load 'cc-mode
  (if (executable-find "clang")
      (setq clang-installed t)
    (setq clang-installed nil)))
#+end_src

** CMake

#+begin_src emacs-lisp
(defun cmake-company-setup ()
  (when cmake-installed
    (add-to-list 'company-backends 'company-cmake)))

(add-hook 'cmake-mode-hook 'cmake-company-setup)

(with-eval-after-load 'cmake-mode
  (if (executable-find "cmake")
      (setq cmake-installed t)
    (setq cmake-installed nil)))
#+end_src
