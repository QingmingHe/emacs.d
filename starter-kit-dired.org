#+TITLE: Starter Kit Dired
#+OPTIONS: toc:nil num:nil ^:nil

* Starter Kit Dired

** Basic settings

#+BEGIN_SRC emacs-lisp
;; set diredp-hide-details-initially-flag before load dired+
(setq diredp-hide-details-initially-flag t)
(require 'dired+)
;; use <f5> to toggle details
(define-key dired-mode-map (kbd "<f5>") 'dired-hide-details-mode)
;; try to guess destination
(setq dired-dwim-target t)
;; use the same buffer for viewing dir, instead of spawning many
(put 'dired-find-alternate-file 'disabled nil)
(define-key dired-mode-map (kbd "RET") 'dired-find-alternate-file)
(define-key dired-mode-map (kbd "^") #'(lambda ()
                                         (interactive)
                                         (find-alternate-file "..")))
#+END_SRC

** Open w32 prog at point

#+BEGIN_SRC emacs-lisp
(defun dired-open-w32-prog-at-point (arg)
  "Open Windows program at point in dired."
  (interactive "P")
  (let ((prog-name (dired-get-filename))
        (prog-argv
         (when arg
           (read-shell-command "Argv passed to prog: "))))
    (when prog-argv
      (setq prog-argv
            (with-temp-buffer
              (insert prog-argv)
              (goto-char (point-min))
              (while (re-search-forward "/cygdrive/\\([a-z]\\)\\([^ ]+\\)" nil t)
                (replace-match "\\1:\\2"))
              (buffer-string))))
    (w32-shell-execute "open" prog-name prog-argv)))

(define-key dired-mode-map "/" 'dired-open-w32-prog-at-point)
#+END_SRC

** How dired presents
#+BEGIN_SRC emacs-lisp
(setq dired-listing-switches "-lah1v --group-directories-first")
#+END_SRC

- l: Is the only mandatory one.
- a: Means to list invisible files.
- G: Don't show group information. These days, when there are more laptops
  than people, the group info is rarely useful.
- h: Human readable sizes, such as M for mebibytes.
- 1v: Affects the sorting of digits, hopefully in a positive way.
- --group-directories-first: self-explanatory, I like to have the directories
  on the top, separate from the files.

** Tips
*** key bindings
- *w* copies file name to ring. *C-u 0 w* copies full path.
- *!* run shell command, *&* run shell command synchronously.
